{
  "version_info": "0",
  "node": {
    "id": "ContourCLI"
  },
  "type_url": "type.googleapis.com/envoy.config.listener.v3.Listener"
}
{
  "version_info": "1",
  "resources": [
    {
      "@type": "type.googleapis.com/envoy.config.listener.v3.Listener",
      "name": "envoy-admin",
      "address": {
        "socket_address": {
          "address": "127.0.0.1",
          "port_value": 9001
        }
      },
      "filter_chains": [
        {
          "filters": [
            {
              "name": "envoy.filters.network.http_connection_manager",
              "typed_config": {
                "@type": "type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager",
                "stat_prefix": "envoy-admin",
                "route_config": {
                  "virtual_hosts": [
                    {
                      "name": "backend",
                      "domains": [
                        "*"
                      ],
                      "routes": [
                        {
                          "match": {
                            "prefix": "/certs"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        },
                        {
                          "match": {
                            "prefix": "/clusters"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        },
                        {
                          "match": {
                            "prefix": "/listeners"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        },
                        {
                          "match": {
                            "prefix": "/config_dump"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        },
                        {
                          "match": {
                            "prefix": "/memory"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        },
                        {
                          "match": {
                            "prefix": "/ready"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        },
                        {
                          "match": {
                            "prefix": "/runtime"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        },
                        {
                          "match": {
                            "prefix": "/server_info"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        },
                        {
                          "match": {
                            "prefix": "/stats"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        },
                        {
                          "match": {
                            "prefix": "/stats/prometheus"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        },
                        {
                          "match": {
                            "prefix": "/stats/recentlookups"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        }
                      ]
                    }
                  ]
                },
                "http_filters": [
                  {
                    "name": "envoy.filters.http.router",
                    "typed_config": {
                      "@type": "type.googleapis.com/envoy.extensions.filters.http.router.v3.Router"
                    }
                  }
                ],
                "normalize_path": true
              }
            }
          ]
        }
      ],
      "socket_options": [
        {
          "description": "Enable TCP keep-alive",
          "level": "1",
          "name": "9",
          "int_value": "1",
          "state": "STATE_LISTENING"
        },
        {
          "description": "TCP keep-alive initial idle time",
          "level": "6",
          "name": "4",
          "int_value": "45",
          "state": "STATE_LISTENING"
        },
        {
          "description": "TCP keep-alive time between probes",
          "level": "6",
          "name": "5",
          "int_value": "5",
          "state": "STATE_LISTENING"
        },
        {
          "description": "TCP keep-alive probe count",
          "level": "6",
          "name": "6",
          "int_value": "9",
          "state": "STATE_LISTENING"
        }
      ]
    },
    {
      "@type": "type.googleapis.com/envoy.config.listener.v3.Listener",
      "name": "ingress_http",
      "address": {
        "socket_address": {
          "address": "0.0.0.0",
          "port_value": 8080
        }
      },
      "filter_chains": [
        {
          "filters": [
            {
              "name": "envoy.filters.network.http_connection_manager",
              "typed_config": {
                "@type": "type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager",
                "stat_prefix": "ingress_http",
                "rds": {
                  "config_source": {
                    "api_config_source": {
                      "api_type": "GRPC",
                      "transport_api_version": "V3",
                      "grpc_services": [
                        {
                          "envoy_grpc": {
                            "cluster_name": "contour",
                            "authority": "contour"
                          }
                        }
                      ]
                    },
                    "resource_api_version": "V3"
                  },
                  "route_config_name": "ingress_http"
                },
                "http_filters": [
                  {
                    "name": "compressor",
                    "typed_config": {
                      "@type": "type.googleapis.com/envoy.extensions.filters.http.compressor.v3.Compressor",
                      "compressor_library": {
                        "name": "gzip",
                        "typed_config": {
                          "@type": "type.googleapis.com/envoy.extensions.compression.gzip.compressor.v3.Gzip"
                        }
                      },
                      "response_direction_config": {
                        "common_config": {
                          "content_type": [
                            "text/html",
                            "text/plain",
                            "text/css",
                            "application/javascript",
                            "application/x-javascript",
                            "text/javascript",
                            "text/x-javascript",
                            "text/ecmascript",
                            "text/js",
                            "text/jscript",
                            "text/x-js",
                            "application/ecmascript",
                            "application/x-json",
                            "application/xml",
                            "application/json",
                            "image/svg+xml",
                            "text/xml",
                            "application/xhtml+xml",
                            "application/grpc-web",
                            "application/grpc-web+proto",
                            "application/grpc-web+json",
                            "application/grpc-web+thrift",
                            "application/grpc-web-text",
                            "application/grpc-web-text+proto",
                            "application/grpc-web-text+thrift"
                          ]
                        }
                      }
                    }
                  },
                  {
                    "name": "grpcweb",
                    "typed_config": {
                      "@type": "type.googleapis.com/envoy.extensions.filters.http.grpc_web.v3.GrpcWeb"
                    }
                  },
                  {
                    "name": "grpc_stats",
                    "typed_config": {
                      "@type": "type.googleapis.com/envoy.extensions.filters.http.grpc_stats.v3.FilterConfig",
                      "emit_filter_state": true,
                      "enable_upstream_stats": true
                    }
                  },
                  {
                    "name": "cors",
                    "typed_config": {
                      "@type": "type.googleapis.com/envoy.extensions.filters.http.cors.v3.Cors"
                    }
                  },
                  {
                    "name": "local_ratelimit",
                    "typed_config": {
                      "@type": "type.googleapis.com/envoy.extensions.filters.http.local_ratelimit.v3.LocalRateLimit",
                      "stat_prefix": "http"
                    }
                  },
                  {
                    "name": "envoy.filters.http.lua",
                    "typed_config": {
                      "@type": "type.googleapis.com/envoy.extensions.filters.http.lua.v3.Lua",
                      "default_source_code": {
                        "inline_string": "-- Placeholder for per-Route or per-Cluster overrides."
                      }
                    }
                  },
                  {
                    "name": "router",
                    "typed_config": {
                      "@type": "type.googleapis.com/envoy.extensions.filters.http.router.v3.Router"
                    }
                  }
                ],
                "common_http_protocol_options": {
                  "idle_timeout": "60s"
                },
                "http_protocol_options": {
                  "accept_http_10": true,
                  "allow_chunked_length": true
                },
                "access_log": [
                  {
                    "name": "envoy.access_loggers.file",
                    "typed_config": {
                      "@type": "type.googleapis.com/envoy.extensions.access_loggers.file.v3.FileAccessLog",
                      "path": "/dev/stdout"
                    }
                  }
                ],
                "use_remote_address": true,
                "preserve_external_request_id": true,
                "normalize_path": true,
                "merge_slashes": true,
                "strip_any_host_port": true
              }
            }
          ]
        }
      ],
      "socket_options": [
        {
          "description": "Enable TCP keep-alive",
          "level": "1",
          "name": "9",
          "int_value": "1",
          "state": "STATE_LISTENING"
        },
        {
          "description": "TCP keep-alive initial idle time",
          "level": "6",
          "name": "4",
          "int_value": "45",
          "state": "STATE_LISTENING"
        },
        {
          "description": "TCP keep-alive time between probes",
          "level": "6",
          "name": "5",
          "int_value": "5",
          "state": "STATE_LISTENING"
        },
        {
          "description": "TCP keep-alive probe count",
          "level": "6",
          "name": "6",
          "int_value": "9",
          "state": "STATE_LISTENING"
        }
      ]
    },
    {
      "@type": "type.googleapis.com/envoy.config.listener.v3.Listener",
      "name": "stats-health",
      "address": {
        "socket_address": {
          "address": "0.0.0.0",
          "port_value": 8002
        }
      },
      "filter_chains": [
        {
          "filters": [
            {
              "name": "envoy.filters.network.http_connection_manager",
              "typed_config": {
                "@type": "type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager",
                "stat_prefix": "stats",
                "route_config": {
                  "virtual_hosts": [
                    {
                      "name": "backend",
                      "domains": [
                        "*"
                      ],
                      "routes": [
                        {
                          "match": {
                            "prefix": "/ready"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        },
                        {
                          "match": {
                            "prefix": "/stats"
                          },
                          "route": {
                            "cluster": "envoy-admin"
                          }
                        }
                      ]
                    }
                  ]
                },
                "http_filters": [
                  {
                    "name": "envoy.filters.http.router",
                    "typed_config": {
                      "@type": "type.googleapis.com/envoy.extensions.filters.http.router.v3.Router"
                    }
                  }
                ],
                "normalize_path": true
              }
            }
          ]
        }
      ],
      "socket_options": [
        {
          "description": "Enable TCP keep-alive",
          "level": "1",
          "name": "9",
          "int_value": "1",
          "state": "STATE_LISTENING"
        },
        {
          "description": "TCP keep-alive initial idle time",
          "level": "6",
          "name": "4",
          "int_value": "45",
          "state": "STATE_LISTENING"
        },
        {
          "description": "TCP keep-alive time between probes",
          "level": "6",
          "name": "5",
          "int_value": "5",
          "state": "STATE_LISTENING"
        },
        {
          "description": "TCP keep-alive probe count",
          "level": "6",
          "name": "6",
          "int_value": "9",
          "state": "STATE_LISTENING"
        }
      ]
    }
  ],
  "type_url": "type.googleapis.com/envoy.config.listener.v3.Listener",
  "nonce": "1"
}
{
  "version_info": "1",
  "node": {
    "id": "ContourCLI"
  },
  "type_url": "type.googleapis.com/envoy.config.listener.v3.Listener",
  "response_nonce": "1"
}
